!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).userContext=t()}(this,function(){"use strict";function r(){var t=null;return function(e,t,n){var r=new XMLHttpRequest;t.method=t.method||"GET",t.async=t.async===false?false:true,t.data=t.data||null,r.open(t.method,e,t.async),r.onload=function(){if(r.status===200){n&&n(JSON.parse(this.responseText))}else{console.error("Error occurred:"+this.statusText)}},r.send(t.data)}("/yuncai/ebvplogin",{method:"GET",async:!1},function(e){e.needrelogin||(n("_yc_user",e.user.ucuserid+"_"+e.enterprise.tenantid),window.localStorage.setItem("user",JSON.stringify(e)),t=e)}),t}function n(e,t){var n=new Date;n.setTime(n.getTime()+864e5),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+";path=/"}function u(e){return new RegExp("(?:; )?"+e+"=([^;]*);?").test(document.cookie)?decodeURIComponent(RegExp.$1):null}function t(){var e=localStorage.getItem("user");if(e){var t,n=(t=JSON.parse(e)).user.ucuserid+"_"+t.enterprise.tenantid;return t.user&&n==u("_yc_user")||(t=r())?t.enterprise:null}return(t=r())?t.enterprise:null}return{getUserContext:function(){var e=localStorage.getItem("user");if(e){var t,n=(t=JSON.parse(e)).user.ucuserid+"_"+t.enterprise.tenantid;return t.user&&n==u("_yc_user")||(t=r())?t.user:null}return(t=r())?t.user:null},getEnterpriseContext:t,setCookie:n,getCookie:u,isLogin:function(){return!!r()},getEnterpriseId:function(){var e=t();return e?e.id:""},getEnterpriseName:function(){var e=t();return e?e.name:""},getTenantId:function(){var e=t();return e?e.tenantid:null}}});
